(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ddaedcf"],{"41de":function(t,e,a){"use strict";a("ca7f")},afae:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0===t.listData.length?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"middle"},[a("img",{staticStyle:{width:"200px"},attrs:{src:"https://cn.vuejs.org/images/logo.svg",alt:""}}),t._m(0)]):a("div",{staticClass:"main"},[t._l(t.listData,(function(e,s){return a("el-descriptions",{key:s,staticStyle:{"margin-bottom":"20px"},attrs:{title:"订单信息",border:""}},[a("template",{slot:"extra"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.handleConfirm(e)}}},[t._v("发货")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.handleCancel(e)}}},[t._v("驳回")])],1),a("el-descriptions-item",[a("template",{slot:"label"},[a("div",[a("svg-icon",{attrs:{"icon-class":"number","class-name":"des-icon"}}),a("span",[t._v("订单编号")])],1)]),a("span",[t._v(t._s(e.orderId))])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("div",[a("svg-icon",{attrs:{"icon-class":"people2","class-name":"des-icon"}}),a("span",[t._v("购买人")])],1)]),a("span",[t._v(t._s(e.user.name))])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("div",[a("svg-icon",{attrs:{"icon-class":"mail","class-name":"des-icon"}}),a("span",[t._v("邮箱地址")])],1)]),a("span",[t._v(t._s(e.user.email))])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("div",[a("svg-icon",{attrs:{"icon-class":"mobile-phone","class-name":"des-icon"}}),a("span",[t._v("联系电话")])],1)]),a("span",[t._v(t._s(e.user.phone))])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("div",[a("svg-icon",{attrs:{"icon-class":"logistics","class-name":"des-icon"}}),a("span",[t._v("产品名称")])],1)]),a("span",[t._v(t._s(e.products[0].name))])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("div",[a("svg-icon",{attrs:{"icon-class":"status","class-name":"des-icon"}}),a("span",[t._v("订单状态")])],1)]),a("el-tag",{attrs:{type:0===e.status?"warning":"success"}},[t._v(t._s(0===e.status?"进行中":"已完成"))])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("div",[a("svg-icon",{attrs:{"icon-class":"time","class-name":"des-icon"}}),a("span",[t._v("购买时间")])],1)]),a("span",[t._v(t._s(e.buyTime))])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("div",[a("svg-icon",{attrs:{"icon-class":"home","class-name":"des-icon"}}),a("span",[t._v("收货地址")])],1)]),a("span",[t._v(t._s(e.address))])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("div",[a("svg-icon",{attrs:{"icon-class":"db","class-name":"des-icon"}}),a("span",[t._v("支付方式")])],1)]),"微信支付"===e.channel?a("el-tag",{attrs:{type:"success"}},[t._v("微信支付")]):"支付宝"===e.channel?a("el-tag",{attrs:{type:"primary"}},[t._v("支付宝")]):t._e()],2)],2)})),a("el-pagination",{attrs:{"current-page":t.pageNum,"page-sizes":[5,10,20,30,50],"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("这是一段信息")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text"},[a("div",[t._v("当前暂无订单需要发货！")]),a("div",[t._v("休息一下吧~")])])}],i=a("1da1"),l=(a("96cf"),a("b0c0"),{name:"Deliver",data:function(){return{loading:!1,dialogVisible:!1,pageNum:1,pageSize:3,total:null,listData:[]}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.loading=!0;var e="/order/get?status=0&pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.getRequest(e).then((function(e){e&&(t.total=e.data.total,t.listData=e.data.data)})),setInterval((function(){t.loading=!1}),1e3)},handleConfirm:function(t){var e=this;this.$confirm("确认给客户["+t.user.name+"]的编号为："+t.orderId+"的订单发货吗？","提示",{cancelButtonText:"取 消",confirmButtonText:"确 认",type:"warning"}).then((function(){e.putRequest("/order/update/status?id="+t.orderId+"&status=1").then(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(s){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!s){a.next=5;break}return n="尊敬的："+t.user.name+"用户，您好！<br /> 您于："+t.buyTime+"购买的编号为"+t.orderId+"的订单已经成功发货！<br />您的收货地址为"+t.address+"<br />请关注订单状态，及时查收！",i="/mail?content="+n+"&flag=true&title=订单发货通知&to="+t.user.email,a.next=5,e.postRequest(i).then((function(t){})).catch((function(){e.$message({type:"error",message:"订单发货成功，邮件通知失败，请检查用户邮箱地址是否有误！"})}));case 5:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())})).catch((function(){e.$message.info("已取消")}))},handleSizeChange:function(t){this.pageSize=t,this.initData()},handleCurrentChange:function(t){this.pageNum=t,this.initData()},handleCancel:function(t){var e=this;this.$confirm("此操作将驳回此订单，确认继续吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){e.putRequest("/order/update/status?status=-1&id="+t.orderId).then((function(t){t&&e.initData()}))})).catch((function(){e.$message.info("已取消")}))}}}),o=l,c=(a("41de"),a("2877")),r=Object(c["a"])(o,s,n,!1,null,"69a27ae3",null);e["default"]=r.exports},ca7f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1ddaedcf.ad5d51cd.js.map