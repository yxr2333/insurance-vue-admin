(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5f06b46"],{"87fd":function(t,e,a){},e286:function(t,e,a){"use strict";a("87fd")},e6e2:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"20px"}},[a("div",{staticClass:"header-helper"},[a("div",[a("el-input",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"请输入产品名称..."},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearchViaName(e)}},model:{value:t.searchProductName,callback:function(e){t.searchProductName=e},expression:"searchProductName"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearchViaName}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:t.advSearchBtnIcon},on:{click:t.handleAdvSearch}},[t._v("高级搜索")]),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.advSearchVisible,expression:"advSearchVisible"}]},[a("el-empty",{attrs:{description:"暂未完成，静候更新"}})],1)])],1),a("div",[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加")]),a("el-button",{attrs:{icon:"el-icon-upload",type:"primary"}},[t._v("导入数据")]),a("el-button",{attrs:{icon:"el-icon-download",type:"primary"},on:{click:t.handleExport}},[t._v("导出数据")])],1)]),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.productTableData}},[a("el-table-column",{attrs:{type:"selection",width:"80"}}),a("el-table-column",{attrs:{prop:"id",label:"产品编号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"保险名称",width:"150"}}),a("el-table-column",{attrs:{prop:"intro",label:"介绍",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.intro&&""!==e.row.intro&&void 0!==e.row.intro?a("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"primary"},on:{click:function(a){return t.handleOpenIntroDialog(e.row)}}},[t._v("...")]):a("el-tag",{attrs:{type:"warning"}},[t._v("暂无介绍")])]}}])}),a("el-table-column",{attrs:{prop:"price",label:"价格(元)",width:"80"}}),a("el-table-column",{attrs:{prop:"category.name",label:"所属分类",width:"120"}}),a("el-table-column",{attrs:{prop:"time",label:"有效期限(年)",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"suitPeople",label:"适用人群",width:"150"}}),a("el-table-column",{attrs:{prop:"scope",label:"销售区域",width:"120"}}),a("el-table-column",{attrs:{prop:"form",label:"保单形式",width:"100"}}),a("el-table-column",{attrs:{prop:"planImgUrl",label:"计划图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",cursor:"pointer"},attrs:{preview:t.row.id+t.row.name,src:t.row.planImgUrl}})]}}])}),a("el-table-column",{attrs:{prop:"productUrlList",label:"产品图鉴",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.productUrlList,(function(t,o){return a("img",{directives:[{name:"show",rawName:"v-show",value:0===o,expression:"index === 0"}],key:t.id,staticStyle:{width:"50px",cursor:"pointer"},attrs:{preview:e.row.id,src:t.imgUrl}})}))}}])}),a("el-table-column",{attrs:{prop:"questions",label:"产品问答"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.questions&&void 0!==e.row.questions&&0!==e.row.questions.length?a("el-tag",{attrs:{type:"primary"},on:{click:function(a){return t.handleOpenQuesDialog(e.row)}}},[t._v(" 查看详情 ")]):a("el-tag",{attrs:{type:"warning"}},[t._v("暂无信息")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作","header-align":"center",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.handleEditData(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.handleDeleteData(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.pageNum,"page-sizes":[5,10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"介绍",visible:t.productDialogVisible,width:"30%"},on:{"update:visible":function(e){t.productDialogVisible=e}}},[a("div",[t._v("保险名称： "+t._s(t.productIntroData.name))]),a("div",[t._v("保险介绍："+t._s(t.productIntroData.intro))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.productDialogVisible=!1}}},[t._v("关 闭")])],1)]),a("el-dialog",{attrs:{title:"问题详情",visible:t.productQuesDialogVisible,width:"30%"},on:{"update:visible":function(e){t.productQuesDialogVisible=e}}},[a("el-form",{attrs:{"label-width":"80px"}},t._l(t.questions,(function(e){return a("div",{key:e.id},[a("el-form-item",{attrs:{label:"问题："}},[a("div",[t._v(t._s(e.question))])]),a("el-form-item",{attrs:{label:"回答："}},[a("div",[t._v(t._s(e.ans))])])],1)})),0),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.productQuesDialogVisible=!1}}},[t._v("关 闭")])],1)],1),a("el-dialog",{attrs:{title:"添加产品",visible:t.addDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.formData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"保险名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入保险名..."},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"保险介绍",prop:"intro"}},[a("el-input",{attrs:{placeholder:"请输入保险介绍..."},model:{value:t.formData.intro,callback:function(e){t.$set(t.formData,"intro",e)},expression:"formData.intro"}})],1),a("el-form-item",{attrs:{label:"保险价格",prop:"price"}},[a("el-input",{attrs:{oninput:"value=value.replace(/[^0-9.]/g,'')",placeholder:"请输入价格..."},model:{value:t.formData.price,callback:function(e){t.$set(t.formData,"price",e)},expression:"formData.price"}})],1),a("el-form-item",{attrs:{label:"保险分类",prop:"category"}},[a("el-select",{attrs:{placeholder:"请选择..."},model:{value:t.formData.category.cateName,callback:function(e){t.$set(t.formData.category,"cateName",e)},expression:"formData.category.cateName"}},t._l(t.cateList,(function(e,o){return null===e.parent?a("el-option-group",{key:o,attrs:{label:e.name}},t._l(t.cateList,(function(t,o){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:null!==t.parent&&t.parent.cateName===e.cateName,expression:"item2.parent !== null && item2.parent.cateName === item1.cateName"}],key:o,attrs:{value:t.cateName,label:t.name}})})),1):t._e()})),1)],1),a("el-form-item",{attrs:{label:"保险时长",prop:"time"}},[a("el-select",{attrs:{placeholder:"请选择..."},model:{value:t.formData.time,callback:function(e){t.$set(t.formData,"time",e)},expression:"formData.time"}},t._l(t.timeList,(function(t,e){return a("el-option",{key:e,attrs:{value:e+1,label:t}})})),1)],1),a("el-form-item",{attrs:{label:"适用人群",prop:"suitPeople"}},[a("el-select",{attrs:{placeholder:"请选择..."},model:{value:t.formData.suitPeople,callback:function(e){t.$set(t.formData,"suitPeople",e)},expression:"formData.suitPeople"}},t._l(t.suitList,(function(t,e){return a("el-option",{key:e,attrs:{value:t,label:t}})})),1)],1),a("el-form-item",{attrs:{label:"销售地区",prop:"scope"}},[a("el-select",{model:{value:t.formData.scope,callback:function(e){t.$set(t.formData,"scope",e)},expression:"formData.scope"}},[a("el-option",{attrs:{value:"中国大陆",label:"中国大陆"}}),a("el-option",{attrs:{value:"台湾地区",label:"台湾地区"}}),a("el-option",{attrs:{value:"港澳地区",label:"港澳地区"}})],1)],1),a("el-form-item",{attrs:{label:"保单形式",prop:"form"}},[a("el-select",{model:{value:t.formData.form,callback:function(e){t.$set(t.formData,"form",e)},expression:"formData.form"}},[a("el-option",{attrs:{value:"电子保单",label:"电子保单形式"}}),a("el-option",{attrs:{value:"纸质保单",label:"纸质保单形式"}})],1)],1),a("el-form-item",{attrs:{label:"保险计划",prop:"plan"}},[a("el-upload",{ref:"fileUpload",attrs:{limit:2,drag:!0,headers:t.headers,action:"/file/upload","list-type":"picture-card","on-success":t.handleSuccessUpload,"on-error":t.handleErrorUpload,"on-remove":t.handleRemovePic}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirmAdd}},[t._v("确 定")])],1)],1)],1)},l=[],i=(a("b0c0"),{name:"Product",data:function(){return{pageNum:1,pageSize:5,total:0,headers:{satoken:window.sessionStorage.getItem("satoken")},addDialogVisible:!1,loading:!1,productQuesDialogVisible:!1,productDialogVisible:!1,questions:[],productTableData:[],productIntroData:{name:"",intro:""},searchProductName:"",advSearchBtnIcon:"el-icon-caret-bottom",advSearchVisible:!1,formData:{name:"",intro:"",price:0,category:{cateName:""},time:0,suitPeople:"",scope:"",form:"",planImgUrl:""},cateList:[],suitList:["婴幼儿","少儿","中年人","女性","中老年人","老年人","无限制","住宅","宠物"],timeList:["一年","两年","三年","五年","十年","其他"]}},methods:{initData:function(){var t=this;this.loading=!0,this.getRequest("/product/all?pageNum="+this.pageNum+"&pageSize="+this.pageSize).then((function(e){e&&(t.productTableData=e.data.data,t.total=e.data.total),t.loading=!1})),this.getRequest("/category/all").then((function(e){e&&(t.cateList=e.data)}))},handleSearchViaName:function(){var t=this;this.loading=!0,this.getRequest("/product?name="+this.searchProductName).then((function(e){e&&(t.productTableData=e.data),t.loading=!1}))},handleAdvSearch:function(){this.advSearchBtnIcon=this.advSearchVisible?"el-icon-caret-bottom":"el-icon-caret-top",this.advSearchVisible=!this.advSearchVisible},handleOpenIntroDialog:function(t){this.productDialogVisible=!0,this.productIntroData.name=t.name,this.productIntroData.intro=t.intro},handleOpenQuesDialog:function(t){this.productQuesDialogVisible=!0,this.questions=t.questions},handleEditData:function(t){this.$notify({type:"success",title:"编辑",message:"编辑"+t.name+"产品"})},handleDeleteData:function(t){var e=this;console.log(t),this.$confirm("此操作将删除：["+t.name+"]产品，是否继续？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.id;e.deleteRequest("/product/"+a).then((function(t){t&&e.initData()}))})).catch((function(){e.$message.info("已取消")}))},handleExport:function(){window.open("http://localhost:8081/file/download/excel/product")},handleSuccessUpload:function(t,e,a){console.log(t),this.formData.planImgUrl=t.data},handleErrorUpload:function(t,e,a){this.$message.error("文件上传失败，请联系管理员！")},handleRemovePic:function(t,e){this.formData.planImgUrl=""},handleConfirmAdd:function(){var t=this;console.log(this.formData),this.loading=!0,this.postRequest("/product",this.formData).then((function(e){e&&(t.loading=!1,t.addDialogVisible=!1,t.initData())}))},handleSizeChange:function(t){this.pageSize=t,this.initData()},handleCurrentChange:function(t){this.pageNum=t,this.initData()}},mounted:function(){this.initData()}}),r=i,n=(a("e286"),a("2877")),s=Object(n["a"])(r,o,l,!1,null,"7a64b162",null);e["default"]=s.exports}}]);
//# sourceMappingURL=chunk-a5f06b46.591b7f0e.js.map