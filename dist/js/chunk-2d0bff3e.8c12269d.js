(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bff3e"],{"405a":function(t,e,l){"use strict";l.r(e);var r=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",[l("div",{staticStyle:{"margin-left":"20px","margin-top":"20px","font-weight":"bold","font-size":"20px"}},[t._v("轮播图管理")]),l("el-carousel",{staticStyle:{"text-align":"center"},attrs:{"indicator-position":"outside"}},t._l(t.list,(function(t){return l("el-carousel-item",{key:t.id},[l("img",{staticStyle:{height:"100%",cursor:"pointer"},attrs:{preview:"111",src:t.imgUrl}})])})),1)],1),l("div",{staticStyle:{margin:"10px"}},[l("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.handleOpenDialog}},[t._v("添加轮播图")])],1),l("div",[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[l("el-table-column",{attrs:{type:"selection",width:"80"}}),l("el-table-column",{attrs:{prop:"id",label:"编号",width:"80"}}),l("el-table-column",{attrs:{prop:"imgUrl",label:"图片",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[l("img",{staticStyle:{width:"50px",cursor:"pointer"},attrs:{preview:t.row.id+t.row.imgUrl,src:t.row.imgUrl}})]}}])}),l("el-table-column",{attrs:{prop:"product",label:"所属保险"}},[l("el-table-column",{attrs:{prop:"product.name",label:"保险名称"}}),l("el-table-column",{attrs:{prop:"product.price",label:"保险价格（元）"}}),l("el-table-column",{attrs:{prop:"product.category.name",label:"所属分类"}}),l("el-table-column",{attrs:{prop:"product.scope",label:"销售地域"}}),l("el-table-column",{attrs:{prop:"product.form",label:"保单形式"}}),l("el-table-column",{attrs:{prop:"product.planImgUrl",label:"图片介绍"},scopedSlots:t._u([{key:"default",fn:function(t){return[l("img",{staticStyle:{width:"50px",cursor:"pointer"},attrs:{preview:t.row.product.planImgUrl+t.row.product.id,src:t.row.product.planImgUrl}})]}}])})],1),l("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(l){return t.handleEditData(e.row)}}},[t._v("编辑")]),l("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(l){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1),l("el-dialog",{attrs:{title:"添加轮播图",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[l("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.rules}},[l("el-form-item",{attrs:{prop:"imgUrl",label:"图片"}},[l("el-upload",{ref:"fileUpload",attrs:{limit:2,drag:!0,headers:t.headers,action:"/file/upload","list-type":"picture-card","on-success":t.handleSuccessUpload,"on-error":t.handleErrorUpload,"on-remove":t.handleRemovePic}},[l("i",{staticClass:"el-icon-plus"})])],1),l("el-form-item",{staticStyle:{"margin-top":"60px"},attrs:{prop:"product",label:"对应产品"}},[l("el-select",{attrs:{placeholder:"请选择..."},model:{value:t.form.product.id,callback:function(e){t.$set(t.form.product,"id",e)},expression:"form.product.id"}},t._l(t.products,(function(t,e){return l("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确 定")])],1)],1)],1)},o=[],i={name:"Carousel",data:function(){return{rules:{imgUrl:[{required:!0,message:"请上传轮播图图片或等待轮播图上传完毕！",trigger:"blur"}],product:[{required:!0,message:"请选择轮播图对应的产品！",trigger:"blur"}]},headers:{satoken:window.sessionStorage.getItem("satoken")},list:[],dialogVisible:!1,form:{imgUrl:"",product:{id:null}},products:[]}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.getRequest("/carousel/all").then((function(e){e&&(t.list=e.data)})),this.getRequest("/product/all").then((function(e){e&&(console.log(e),t.products=e.data)}))},handleEditData:function(t){console.log(t)},handleDelete:function(t){var e=this,l=t.id;this.$confirm("此操作将永久删除此轮播图，确认继续？","警告",{confirmButtonText:"继 续",cancelButtonText:"取 消",type:"warning"}).then((function(){e.deleteRequest("/carousel/"+l).then((function(t){t&&e.initData()}))})).catch((function(){e.$message.info("已取消")}))},handleSuccessUpload:function(t,e,l){var r=t.data.data.url;this.form.imgUrl=r},handleErrorUpload:function(t,e,l){this.$message.error("文件上传失败，请联系管理员！")},handleRemovePic:function(t,e){this.form.imgUrl=url},handleOpenDialog:function(){this.dialogVisible=!0,this.$notify({type:"warning",title:"提示",message:"请等待图片提示上传成功后，再点击保存！",duration:-1})},handleConfirm:function(){var t=this;this.$refs.form.validate((function(e){return!!e&&(null===t.form.product.id?(t.$message.error("请选择轮播图对应的产品！"),!1):void t.postRequest("/carousel",t.form).then((function(e){e&&(console.log(e),t.initData(),t.$message.success("添加成功！"),t.dialogVisible=!1)})))}))}}},a=i,n=l("2877"),s=Object(n["a"])(a,r,o,!1,null,"b75c6626",null);e["default"]=s.exports}}]);
//# sourceMappingURL=chunk-2d0bff3e.8c12269d.js.map